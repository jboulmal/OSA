var currentQuotaUri,quotaModified,userServiceQuotaToolTip="Available service on which user quotas are defined";function saveNewQuota(){saveOrUpdateQuota("POST")}function updateQuota(){saveOrUpdateQuota("PUT")}
function saveOrUpdateQuota(a){currentQuotaUri=document.getElementById("quotaUri").value;reqSec="reqSec="+encodeURIComponent(document.getElementById("reqSec").value);reqDay="reqDay="+encodeURIComponent(document.getElementById("reqDay").value);reqMonth="reqMonth="+encodeURIComponent(document.getElementById("reqMonth").value);postData=reqSec+"&"+reqDay+"&"+reqMonth;$.ajax({url:currentQuotaUri+"?"+postData,dataType:"json",type:a,data:postData,success:startDisplayUserQuotasForCurrentUser,error:displayError})}
function setQuotaModified(a){(quotaModified=a)?setActionButtonEnabled("saveEditQuotas",!0):setActionButtonEnabled("saveEditQuotas",!1)}function startEditUserQuotasForCurrentQuota(){startEditUserQuotas(currentQuotaUri)}function startEditUserQuotas(a){currentQuotaUri=a;$.getJSON(a,editUserQuotas).error(displayError)}function startPopulateUnsetQuotas(a){$.getJSON(a+"/quotas/unset/",populateUnsetQuotas).error(displayError)}
function populateUnsetQuotas(a){0<a.length?$.each(a,function(a,b){$("#quotaUri").append($("<option>",{value:b.uri,text:b.serviceName}))}):($("#quotaUri").hide(),$("#saveEditQuotas").hide())}function addUserQuotas(){$.get("resources/templates/userQuotaAdd.php",function(a){$("#content").html(a.replaceAll("{currentUser.userName}",currentUser.userName));setQuotaModified(!0);startPopulateUnsetQuotas(currentUserUri)})}
function editUserQuotas(a){$.get("resources/templates/userQuotaEdit.php",function(c){$("#content").html(c.replaceAll("{quota.serviceName}",a.serviceName).replaceAll("{quota.userName}",a.userName).replaceAll("{quota.uri}",a.uri).replaceAll("{quota.reqSec}",a.reqSec).replaceAll("{quota.reqDay}",a.reqDay).replaceAll("{quota.reqMonth}",a.reqMonth));currentQuotaUri=a.uri;setQuotaModified(!1)})};
